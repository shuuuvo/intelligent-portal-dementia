%
% University of East Anglia Dissertation Style
% School of Computing Sciences.
%
%% on 17/08/15
% adjusted the margins of the paper to meet the specifications for A4 paper: 
% Left margain: ~4cm(~1.5"), all the others: ~2cm(~0.5")
% Modification by wjw.
%
%-% Stanford University thesis style -- modifications to the report style
%-% For LaTeX version 2.09 and above 
%-% combined with cmpthesis latex tmeplate edited by Dr. Wenjia Wang, CMP, UEA on 17/08/2015.
%-% last edit by wjw to change the right margin to 0.1in wider on 13/09/16  
%
% Modifications by wjw, Set. 2005, based on the Latex samples Thesis in WinEdt
%
%       - Changed baselinestretch to 1.37.
%       - Changed \school default to MS&CS and other name changes.
%       - Allow user to specify university and faculty
%       - Changed page headings to be page number only, except on
%         the first page of each chapter (page number at bottom).
%       - Redefined title and signature page.
%       - Added optional permission page (formly supplied by
%         Graduate Studies).  Page skipped if omitted.
%       - User can define degree to be recieved.
%         \msc (default), \ma, and \phd provided.
%       - Signature page slightly different for PhD.
%       - Two to three markers' signatures for Masters thesis,
%         three to five markers' signatures for PhD.
%       - Convocation date is either given or calculated.
%       - Two supervisors supported.
%       - Added dedication page environment.
%       - List of tables and figures recorded in table of
%         contents.
%       - User can omit front material or bibliography for
%         draft printing purposes.
%       - User can specify draft copies, "draft copy" and date
%         printed on title page and headers.
%       Bugs:
%       - TeX complains too much about the front material, ignore
%         under/overfull box messages on pages ii and iii.
%         (Better yet, can somebody fix this?)
%       - Cannot handle school name more than 4-5 characters
%         longer than MS&CS (does one exist?).
%       - Occassional screw ups when adding diferent university,
%         school and faculty names.
%       - Would also have difficultly with very long author names.
%
% Modifications by Steven Matheson, Sept 1992
%       - Added the forgotten `` \\'' after thrid signature on signature page,
%         caused third and fourth signatures to be too close.
%
% 
%

%\typeout{Document Style Option `cmpthesis'.}

%\long\def\comment#1{}
%\comment{
%
%  Example of use:
%    \documentstyle[12pt,cmpthesis]{report}
%    \begin{document}
%    \title{How to Write Theses\\
%	    With Two Line Titles}
%    \author{John Smith Candidate}
%    \supervisor{John Parker}
%    \firstmarker{John Green}
%    \secondmarker{John BigBooty}
%
%    \dedicate{
%	This is the optional\\
%	dedication page.\\
%	Break lines up\\
%	like this.
%    }
%
%    \beforepreface
%
%    \prefacesection{Abstract}
%	An abstract is required in all theses.  Make sure that it fits
%	on one page!
%
%    \afterpreface
%
%    \chapter{Introduction}
%	 ...
%    \chapter{Conclusions}
%	 ... ...
%%    \bibliographystyle{plain}
%    \bibliographystyle{apalike}
%    \bibliography{mybib} 
%    
%% Appendix should be placed after bibliogrphy
%    \appendix
%    \chapter{A Long Proof}
%    
%    \end{document}
%
%Documentation:
%    This style file modifies the standard report style to follow the
%    Faculty of Science, the University of East Anglia, "Regulations for
%    Submission of Theses".  It sets the margins and required interline
%    spacing and disallows page breaks at hyphens.
%
%    The \beforepreface command creates the title page, a signature page,
%    and a permission page (optionally).  Then the user should put
%    preface section(s), using the \prefacesection{section title}
%    command.  The \afterpreface command then produces the tables of
%    contents, tables and figures (optionally), and sets things up to
%    start the main body (on arabic page 1).
%
%    The following commands control the typesetting of your thesis:
%
%   Basic Information:
%
%	\title{thesis title}
%		- Will appear in large print on page i.  If it is too
%		  long it will automatically be split into separate
%		  lines.  If you wish to specify line breaks, use the
%		  \\ command inside the title.
%		  \title{Very Long\\Title\\Split Over\\Several Lines}
%		  Make sure that there is no space before \\.
%
%	\author{author's name}
%		- Your name as you wish it to appear in the thesis.
%
%   Graduation and Submission Information:
%
%	\submitdate{month year in which submitted to Graduate Studies}
%		- date LaTeX'd if omitted
%
%	\copyrightyear{year thesis}
%		- year LaTeX'd if omitted
%
%	\convocation{month}{year}
%		- Date set to next May or Oct. after \submitdate if omitted
%
%   Degree Specification:
%
%	\msc
%		- Degree to obtain is Master of Science, MSc. (default)
%	\ma
%		- Degree to obtain is Master of Arts, MA.
%	\phd
%		- Degree to obtain is Doctor of Philosophy, PhD.
%
%   Signatures:
%
%	\examiner{the external examiner's name}
%		- Use only for PhD.
%	\supervisor{the supervisor's name}
%		- Include research supervisor's name.
%	\firstmarker{the first marker's name}
%		- Include the first marker's name.
%	\secondmarker{the second marker's name}
%		- Include the second marker's name.
%	\thirdmarker{the third marker's name}
%		- Omit this command if only two markers (typical MSc case)
%		- PhD. cases usually have at least three markers
%	\fourthmarker{the fourth  marker's name}
%		- Omit this command if not required (typical PhD. case)
%	\organiser{the module organiser's name}
%		- Omit this command if not required (typical PhD. case)
%
%	Sorry, provisions has been made to allow only seven signatures.
%
%
%   Sectioning commands::
%
%	\dedicate{
%	  First line\\
%	  second line\\
%	  last line.
%	}
%		- Produces the optional dedication page.  Must be placed
%		  before the \beforepreface command.
%	
%	\prefacesection{Whatever}
%	Blah, blah, blah...
%		- Produces a preface section, such as abstract,
%		  acknowledgements, etc.  This must appear between
%		  \beforepreface and \afterpreface commands.
%		  Typeset similar to chapters, not numbered.
%
%	\chapter{Whatever}
%	Blah, blah, blah...
%		- Produce a numbered chapter section.
%
%	\section{Section name}
%		- Place prior to a section of a given chapter.
%	
%	\subsection{Subsection name}
%		- Place prior to a subsection of a given section.
%
%	\appendix
%		- Place this command before your first appendix chapter.
%		  Use the \include command thereafter.  These will be
%		  lettered, not numbered.
%
%	\nonumchapter{Whatever}
%	Blah, blah, blah...
%		- Produces a chapter section that is not to be numbered,
%		  such as an introduction chapter.  This is used in the
%		  same way as the \chapter command.
%
%   Printing draft copies:
%
%	\draft
%		- For printing draft copies of the thesis.  Specifies
%		  on page headers that the copy is draft and specifies
%		  the date printed.  Also specifies draft and date on
%		  the title page.
%	\nofront
%		- Specifies not to print the signature and permission
%		  pages, table of contents, and the lists of figures and
%		  tables.  Useful for draft copies to cut done on printing.
%	\nobib
%		- Suppresses the printing of the bibliiography.
%		  Useful for draft copies to cut done on printing.
%
%   Specialized commands:
%
%	\nolistoffigures
%		- don't produce a List of Figures
%	\nolistoftables
%		- don't produce a List of Tables
%	\twosupervisors
%		- Use if you have two co-supervisors instead of one supervisor.
%		  Name given by \supervisor{} will go first, \firstmarker{}
%		  will be second.  Can be used with PhD. format.
%	\univerity{name of university}
%		- ``University of East Anglia'' default.  Can specify line breaks
%		  for larger names.
%	\address{university address}
%		- ``Norwich, UK'' default.
%	\school{author's school}
%		- ``Computing Sciences'' default
%	\course{author's course}
%			- ``Computing Sciences'' default
%	\faculty{degree granting faculty}
%		- [Faculty of] ``Science'' default
%	\degree{Full Degree Title}
%	\degreeinitial{F.D.T.}
%		- Specify degree name and initials
%		  \degree{Master of Computing Science}
%		  \degreeinitial{MCS}
%	\permissionfalse
%		- don't produce a permission page (true by default)
%
%This style uses interline spacing that is 1.37 times normal, except
%in the figure and table environments where normal spacing is used.
%That can be changed by doing:
%
%    \renewcommand{\baselinestretch}{1.5}
%    
%(or whatever you want instead of 1.5)
%
%Unfortunately, that command probably won't take effect unless it comes
%before the \begin{document} or after a type size changing command like
%\small or \normalsize.
%
%The example above shows the 12pt substyle being used.  This is required
%for submission copy, but it may be omitted to get smaller draft print.
%Note that the front material may not look good in smaller print.
%
%}

% Define the page heading to be page number only.
\newcommand{\properpagestyle}{
	   \pagestyle{myheadings}\markboth{}{}\markright{}}

% First thing we do is make sure that report has been loaded.  A
% common error is to try to use suthesis as a documentstyle.
\@ifundefined{chapter}{\@latexerr{The `cmpthesis' option should be used
with the `report' document style}{You should probably read the
cmpthesis documentation.}}{}

% Set left margin to 1.5"(4cm) and all the others to 0.5"(2cm) 
% for A4 paper size, 
% adjusted by wjw on 17/08/2015
% Theses are single-sided, so we don't care about \evensidemargin
\oddsidemargin 0.5in \evensidemargin 0in
\marginparwidth 40pt \marginparsep 10pt
\topmargin -0.6in \headsep 10pt
%\textheight 8.1in \textwidth 6in % original for letter paper
\textheight 10.3in \textwidth 6.1in % changed from 6.2 to 6.1 on 13/09/16

% Disallow page breaks at hyphens (this will give some underfull vbox's,
% so an alternative is to use \brokenpenalty=100 and manually search
% for and fix such page breaks)
\brokenpenalty=10000

% Use 1.37 times the normal baseline-to-baseline skip
\renewcommand{\baselinestretch}{1.37}

% Redefine the macro used for footnotes to use single spacing

\long\def\@footnotetext#1{\insert\footins{\def\baselinestretch{1}\footnotesize
    \interlinepenalty\interfootnotelinepenalty
    \splittopskip\footnotesep
%   \splitmaxschoolh \dp\strutbox \floatingpenalty \@MM
% This line caused a compiling error of "undefined control seuqence
% when using \footnote, although the \footnote command still works.
% It was edited out and then marco for \footnote works without problem. 
% wjw, 09/09/2015. 
    \hsize\columnwidth \@parboxrestore
    \edef\@currentlabel{\csname p@footnote\endcsname\@thefnmark}\@makefntext
    {\rule{\z@}{\footnotesep}\ignorespaces
      #1\strut}}}


% \author, \title are defined in report; here are the rest of the
% front matter defining macros
\def\university#1{\gdef\@university{#1}}
\def\address#1{\gdef\@address{#1}}
\def\school#1{\gdef\@school{#1}}
\def\course#1{\gdef\@course{#1}}
\def\faculty#1{\gdef\@faculty{#1}}
\def\supervisor#1{\gdef\@supervisor{#1}}
\def\superviser#1{\gdef\@supervisor{#1}}
\def\firstmarker#1{\gdef\@firstmarker{#1}}
\def\secondmarker#1{\gdef\@secondmarker{#1}}
\def\thirdmarker#1{\gdef\@thirdmarker{#1}\third@markertrue}
\def\fourthmarker#1{\gdef\@fourthmarker{#1}\fourth@markertrue}
\def\organiser#1{\gdef\@organiser{#1}\module@markertrue}
\def\examiner#1{\gdef\@examiner{#1}}
\def\twosupervisors{\two@supervisorstrue}
\def\submitdate#1{\gdef\@submitdate{#1}}
\def\copyrightyear#1{\gdef\@copyrightyear{#1}} % \author, \title in report
\def\degree#1{\gdef\@degree{#1}}
\def\degreeinitial#1{\gdef\@degreeinitial{#1}}
\def\msc{\degree{Master of Science}\degreeinitial{MSc.}}
\msc % default degree
\def\phd{\degree{Doctor of Philosophy}\degreeinitial{PhD.}\ph@dtrue}
\def\ma{\degree{Master of Arts}\degreeinitial{MA.}}
\def\@title{}
\def\@author{}
\def\@university{University of East Anglia}
\def\@address{Norwich, UK}
\def\@school{Computing Sciences}
\def\@faculty{Science Graduate Studies}
\def\@supervisor{}\def\@firstmarker{}\def\@secondmarker{}
\def\@thirdmarker{}\def\@fourthmarker{}\def\@organiser{}
\def\@examiner{}
\def\@submitdate{\ifcase\the\month\or
  January\or February\or March\or April\or May\or June\or
  July\or August\or September\or October\or November\or December\fi
  \space \number\the\year}
\def\@copyrightyear{\number\the\year}

% added tehfollowing lines to set the end date for confidientiality restriction  
% on 24/03/2020 by wenjia wang
\def\setconfidentialdate2#1{\gdef\@setconfidentialdate2{#1}}
\def\@setconfidentaildate2{\ifcase\the\month\or
	January\or February\or March\or April\or May\or June\or
	July\or August\or September\or October\or November\or December
	\fi
	\space \number\the\year}

\def\confidential#1{\gdef\@confidential{#1}\confidential@yeartrue}
%\def\confidential#1{\gdef\@confidential{#1}\renewcommand{\properpagestyle}{\pagestyle{myheadings}
%		\markright{\rm \underline{Confidential until \@setconfidentialdate2}}}
%	\confidential@yeartrue\properpagestyle}


\def\studyyears#1#2{\gdef\@studyyears{#1\hspace{.2ex}-\hspace{-.35ex}-#2}} % defined by wjw 24/11/16


\def\convocation#1#2{\gdef\@convocationmonth{#1}\gdef\@convocationyear{#2}}
\def\@convwarn{\typeout{Warning! Convocation date may be incorrect!}}
\ifnum\month<7
   \def\@convocationmonth{July}
   \def\@convocationyear{\number\the\year\@convwarn}
\else\ifnum\month<12
   \def\@convocationmonth{December}
   \def\@convocationyear{\number\the\year\@convwarn}
\else
   \def\@convocationmonth{February}
   \@tempcnta=\year  \advance\@tempcnta by 1
   \def\@convocationyear{\number\the\@tempcnta\@convwarn}
\fi\fi

\def\dedicate#1{\dedic@tiontrue\gdef\dedication@text{#1}}

\def\draft{\renewcommand{\properpagestyle}{\pagestyle{myheadings}
\markright{{\rm Draft Version -- \today}}}\draft@modetrue\properpagestyle}


\def\nobib{\print@bibfalse}
\def\nolistoffigures{\figurespagefalse}
\def\nolistoftables{\tablespagefalse}
\def\nolistofabbs{\abbpagefalse} % added by wjw


\def\nofront{\front@pagesfalse\permissionfalse\figurespagefalse\tablespagefalse}

% New if constructs:    Default conditions:
\newif\ifpermission     \permissiontrue
\newif\iffigurespage    \figurespagetrue
\newif\iftablespage     \tablespagetrue
\newif\ifabbpage    	\abbpagetrue % added on 05/08/15, wjw
\newif\iffront@pages    \front@pagestrue
\newif\ifthird@marker   \third@markerfalse
\newif\iffourth@marker  \fourth@markerfalse
\newif\ifmodule@marker   \module@markerfalse
\newif\ifph@d           \ph@dfalse
\newif\iftwo@supervisors \two@supervisorsfalse
\newif\ifdraft@mode     \draft@modefalse
\newif\ifprint@bib      \print@bibtrue
\newif\ifdedic@tion     \dedic@tionfalse

\newif\ifconfidential@year \confidential@yearfalse %wjw added on 23/03/20

\def\no@breaks#1{{\def\\{ \ignorespaces}#1}}    % disallow explicit line breaks

%\newcommand\Titlefont{\@setfontsize\Titlefont\@xviipt{25}}

\def\titlep{%
	\thispagestyle{empty}%
	\ifdraft@mode
	  \begin{center} \Large DRAFT COPY\\ \large Printed \today \end{center}
	\fi
	
	% added to print out the confidentiality statement on the title page if \confidential{}	
	\ifconfidential@year
			\vskip0.4in
			\begin{center}
			\textcolor{red}
			{\emph{CONFIDENTIALITY STATEMENT:\\ 
			The contents of this dissertation remain confidential until \underline{\@setconfidentialdate2 } 
			and should not be discussed or disclosed to any third party without the prior written permission 
			from the School of Computing Sciences, the University of East Anglia.}}
			
		\end{center}	
	\fi		

	\null\vskip0.5in
	\begin{center}
		\hyphenpenalty=10000\Large\bfseries\uppercase\expandafter{\@title}
	\end{center}
	\vfill
	\begin{center}
		\large\bfseries\rm \@author
	\end{center}
	\vfill
	\begin{center}
%
%		\footnotesize SUBMITTED IN PARTIAL FULFILLMENT OF THE \\
%		REQUIREMENTS FOR THE DEGREE OF \\
%		\uppercase\expandafter{\@degree} \\
%		AT \\
%		\uppercase\expandafter{\@university} \\
%		\uppercase\expandafter{\@address} \\
%		\uppercase\expandafter{\@submitdate}
		\bfseries
		\footnotesize A dissertation submitted to \\
	    The School of \expandafter{\@school} of   
       % \expandafter{\@university} 
       the University of East Anglia \\
        in partial fulfilment of the requirements for the degree of \\
		\uppercase\expandafter{\@degree}. \\
		\uppercase\expandafter{\@submitdate}

	\end{center}

	\begin{center}
 	\vskip0.5in
    \copyright\ 
    This dissertation has been supplied on condition that anyone who consults 
    it is understood to recognise that its copyright rests with the author 
    and that no quotation from the dissertation, nor any information derived therefrom, 
    may be published without the author or the supervisor's prior consent.\\
	\end{center}

	\newpage}

\def\signature#1#2{\parbox[b]{1in}{\smash{#1}\vskip12pt}
\hfill \parbox[t]{3in}{\shortstack{\vrule width 3in height 0.4pt\\\small#2}}}

\def\signaturepage{%
	\setcounter{page}{2}
	\begin{quotation}
	\begin{center} 
	%	\uppercase\expandafter{\@university} \\
	%  THE SCHOOL OF \uppercase\expandafter{\@school}\\

        SUPERVISOR(S), MARKERS/CHECKER AND ORGANISER 
	\end{center}
	\vskip 0.25in plus 0.4in minus 0.1in
	\hyphenpenalty=10000
	\parindent=36pt
	\begin{sloppypar}
	The undersigned hereby certify that the markers have independently marked the dissertation entitled
	\linebreak[3] ``{\bf\normalsize\no@breaks{\@title}}''
	\linebreak[3] by \mbox{\bf\normalsize\@author}, and the external examiner has checked the marking, 
	in accordance with the marking criteria 
	and the requirements for the degree of 	\linebreak[2] \mbox{\bf\@degree}. \\
	\end{sloppypar}
	\vskip0.2in plus 1fill minus 0.1in
%	\begin{flushright}
%	Dated: \underbar{\ \@submitdate\ }
%	\end{flushright}

	\iffourth@marker
		\def\sigskip{\vskip0.15in plus 0.2in minus 0.1in}
		\def\beginskip{\vskip0.3875in plus 0.2in minus 0.1in}
	\else
		\def\sigskip{\vskip0.4in plus 0.1in}
		\def\beginskip{\vskip0.5875in plus 0.1in}
	\fi

	\ifph@d
		\beginskip
		\signature{External Examiner:}{\@examiner} \\

		\iftwo@supervisors
		  \sigskip \signature{Research Supervisors:}{\@supervisor} \\
		  \sigskip \signature{}{\@firstmarker} \\
		  \sigskip \signature{Examining Committee:}{\@secondmarker} \\
		\else
		  \sigskip \signature{Research Supervisor:}{\@supervisor} \\
		  \sigskip \signature{Examination Board:}{\@firstmarker} \\
		  \sigskip \signature{}{\@secondmarker} \\
		\fi
	\else % not PhD. degree:
		\beginskip
		\iftwo@supervisors
		  \signature{Supervisors:}{\@supervisor} \\
		  \sigskip \signature{}{\@firstmarker} \\
		  \ifthird@marker
		    \sigskip \signature{Markers:}{\@secondmarker} \\
		  \else
		    \sigskip \signature{Marker:}{\@secondmarker} \\
		  \fi
		\else
		  \signature{Supervisor:}{\@supervisor} \\
		  \sigskip \signature{Markers:}       {\@firstmarker} \\
		  \sigskip \signature{}{\@secondmarker} \\
		\fi
		\sigskip \signature{External Examiner:}{\@examiner} \\
	\fi

		\ifthird@marker
		  \sigskip \signature{}{\@thirdmarker} \\
		\fi

		\iffourth@marker
		  \sigskip \signature{}{\@fourthmarker} \\
		\fi

		\ifmodule@marker
		  \sigskip \signature{Moderator:}{\@organiser} \\
		\fi

	\end{quotation}
	\vfill\newpage\setcounter{page}{3} }

\def\permissionpage{%
	{\newpage \parindent=0.75in \hyphenpenalty=10000
	\begin{quotation}
	\begin{center}
		\large \uppercase\expandafter{}
		%{\@university}\\
		        DISSERTATION INFORMATION AND STATEMENT
	\end{center}
	\bigskip
	\begin{flushright}
		Dissertation Submission Date: {\bf\@submitdate}
	\end{flushright}
	\begin{list}{}{
		\setlength{\leftmargin}{1in}
		\setlength{\labelwidth}{0pt}
		\setlength{\labelsep}{\leftmargin}}
	\raggedright
	\item[\hbox to 0pt{Student:}]    {\bf\@author}
	\item[\hbox to 0pt{Title:}]     {\bf\no@breaks{\@title}}
	\item[\hbox to 0pt{School:}]  	{\bf\@school}
	\item[\hbox to 0pt{Course:}]  	{\bf\@course}
    \item[\hbox to 0pt{Degree:}]  	{\bf\@degreeinitial}
    \item[\hbox to 0pt{Duration:}]  	{\bf\@studyyears}
  %  \item[\hbox to 0pt{Year:}]  	{\bf\@convocationyear}
    \item[\hbox to 0pt{Organiser:}] 	{\bf\@organiser}
    \end{list}
%	Degree: {\bf\@degreeinitial\hfil}
	%	Convocation: {\bf\@convocationmonth\hfil}
%	Year: {\bf\@convocationyear\hfil} \\
	\bigskip
	\def\baselinestretch{1}\@normalsize
	\parindent=36pt
\noindent
STATEMENT:\\ 
	\indent
	{\small Unless otherwise noted or referenced in the text, the work described in this dissertation is, 
	to the best of my knowledge and belief, my own work. It has not been submitted, 
	either in whole or in part for any degree at this or any other academic or professional institution.}
	
	\indent
	{\small Subject to confidentiality restriction if stated, permission is herewith granted to % \no@breaks{\@university} 
		the University of East Anglia 
	to circulate and to have copied for non-commercial purposes, at its discretion, the above title upon the request of individuals or institutions.}

	\vskip1.5in
	\signature{}{{\small Signature of Student}}

	\bigskip\bigskip

	\begin{sloppypar}
	\footnotesize
	\relax
%	THE AUTHOR RESERVES OTHER PUBLICATION RIGHTS, AND NEITHER
%	THE THESIS NOR EXTENSIVE EXTRACTS FROM IT MAY BE PRINTED OR
%%	OTHERWISE REPRODUCED WITHOUT THE AUTHOR'S WRITTEN PERMISSION.
%	\medskip
%
%	THE AUTHOR ATTESTS THAT PERMISSION HAS BEEN OBTAINED FOR THE
%	USE OF ANY COPYRIGHTED MATERIAL APPEARING IN THIS DISSERTATION (OTHER
%	THAN BRIEF EXCERPTS REQUIRING ONLY PROPER ACKNOWLEDGEMENT IN
%	SCHOLARLY WRITING) AND THAT ALL SUCH USE IS CLEARLY ACKNOWLEDGED.
	\end{sloppypar}
	\end{quotation}
	} \vfill}

\def\beforepreface{
\typeout{Most over/underfulls in first few pages are the fault of cmpthesis.}
\typeout{Ignore all them.  If uncorrectable errors occur, notify staff.}
	\pagenumbering{roman}
	\pagestyle{plain}
	\titlep
	\iffront@pages\signaturepage\else\addtocounter{page}{1}\fi
	\ifpermission\permissionpage\else\addtocounter{page}{1}\fi
	
%	\iffront@pages\ifdedic@tion
%		\newpage\begin{center}\Large\em\null\vskip1in
%		\dedication@text
%		\vfill\end{center}
%	\fi\fi

    {\typeout{Abstract} \include{Abstract}}
    {\typeout{Acknowledgements}\include{Acknowledgement}}

	\iffront@pages\tableofcontents\else\addtocounter{page}{1}\fi
	\newpage
	\iftablespage
		\addcontentsline{toc}{chapter}{List of Tables}\listoftables
		\newpage
	\fi
	\iffigurespage
		\addcontentsline{toc}{chapter}{List of Figures}\listoffigures
		\newpage
	\fi
	\ifabbpage
	% add the list of abbreviations to the content list. added by wj on 05/08/15
		\addcontentsline{toc}{chapter}{List of Abbreviations} \printglossary[type=\acronymtype, title=List of Abbreviations]
		%\printglossaries 
	\fi
	}


\def\nonumchapter#1{%
	\chapter*{#1}
	\addcontentsline{toc}{chapter}{#1}}

\def\prefacesection#1{%
	\chapter*{#1}
	\addcontentsline{toc}{chapter}{#1}}

\newenvironment{dedication}{\newpage\begin{center}\Large\em\null\vskip1in}%
{\vfill\end{center}}


\def\afterpreface{\newpage
	\pagenumbering{arabic}
	\typeout{Cmpthesis preface pages completed.}
	\properpagestyle}

% Redefine \thebibliography to go to a new page 
% and put an entry in the table of contents
\let\@ldthebibliography\thebibliography
\renewcommand{\thebibliography}[1]{%
	\newpage
	\addcontentsline{toc}{chapter}{References} % changed on 17/08/20 
	\@ldthebibliography{#1}
}


%\let\@ldbibliography\bibliography
%\renewcommand{\bibliography}[1]{\ifprint@bib\@ldbibliography{#1}\fi}

\renewcommand{\bibname}{References} % added on 20/05/21

% Start out normal
\properpagestyle
